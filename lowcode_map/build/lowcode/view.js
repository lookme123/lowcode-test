!function e(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.LowcodeMap=n():t.LowcodeMap=n()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function t(){return e.default}:function t(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=329)}({1:function(e,t){e.exports=window.React},15:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={MARKER_ID_CONFLICT:"Marker \u7684 id \u5c5e\u6027\u91cd\u590d",MARKER_ID_REQUIRED:"\u6bcf\u4e00\u4e2a Marker \u5fc5\u9700\u6709\u4e00\u4e2a id \u5c5e\u6027",MAP_INSTANCE_REQUIRED:"\u6ca1\u6709\u5730\u56fe\u5b9e\u4f8b\uff1b\u7ec4\u4ef6\u5fc5\u987b\u4f5c\u4e3a Map \u7684\u5b50\u7ec4\u4ef6\u4f7f\u7528",CIRCLE_INSTANCE_REQUIRED:"",CIRCLE_CENTER_REQUIRED:"Circle \u7ec4\u4ef6\u5fc5\u9700\u8bbe\u7f6e center \u5c5e\u6027",CIRCLE_RADIUS_REQUIRED:"Circle \u7ec4\u4ef6\u5fc5\u9700\u8bbe\u7f6e radius \u5c5e\u6027",SRC_REQUIRED:"GroundImage \u7ec4\u4ef6\u5fc5\u9700\u8bbe\u7f6e src \u5c5e\u6027",BOUNDS_REQUIRED:"GroundImage \u7ec4\u4ef6\u5fc5\u9700\u8bbe\u7f6e bounds \u5c5e\u6027",WINDOW_POSITION_REQUIRED:"InfoWindow \u7ec4\u4ef6\u5fc5\u9700\u8bbe\u7f6e position \u5c5e\u6027",INVALID_AMAP_PLUGIN:"plugins \u5c5e\u6027\u4e0d\u6b63\u786e\uff1b\u76ee\u524d\u652f\u6301\u7684\u63d2\u4ef6\u6709'Scale', 'ToolBar', 'MapType', 'OverView'"},o=function e(t){return t in r?r[t]:t},i={error:function e(t){throw new Error(o(t))},warning:function e(t){console.warn(o(t))},optimize:function e(t){console.log("%c"+o(t),"color:#d4d483;border-left: 2px solid #d4d483;padding-left: 4px;")}};t.default=i},163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseTool=t.Marker=t.GroundImage=t.InfoWindow=t.PolyEditor=t.Polyline=t.Polygon=t.CircleEditor=t.Circle=t.Markers=t.Map=void 0;var r,o=E(n(330)),i,a=E(n(333)),u,l=E(n(334)),c,s=E(n(335)),f,p=E(n(336)),d,h=E(n(337)),v,y=E(n(338)),m,b=E(n(339)),w,g=E(n(340)),_,k=E(n(78)),C,M=E(n(341));function E(e){return e&&e.__esModule?e:{default:e}}t.Map=o.default,t.Markers=l.default,t.Circle=s.default,t.CircleEditor=g.default,t.Polygon=p.default,t.Polyline=h.default,t.PolyEditor=k.default,t.InfoWindow=y.default,t.GroundImage=b.default,t.Marker=a.default,t.MouseTool=M.default,t.default={Map:o.default,Markers:l.default,Circle:s.default,CircleEditor:g.default,Polygon:p.default,Polyline:h.default,PolyEditor:k.default,InfoWindow:y.default,GroundImage:b.default,Marker:a.default,MouseTool:M.default}},165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderMarkerComponent=t.getPropValue=t.MarkerAllProps=t.MarkerConfigurableProps=void 0;var r=n(27),o,i=c(n(1)),a=n(17),u,l=c(n(69));function c(e){return e&&e.__esModule?e:{default:e}}var s=t.MarkerConfigurableProps=["position","offset","icon","content","draggable","visible","zIndex","angle","animation","shadow","title","clickable","extData","label"],f=t.MarkerAllProps=s.concat(["topWhenClick","bubble","raiseOnDrag","cursor","autoRotation","shape"]),p=t.getPropValue=function e(t,n){return-1===f.indexOf(t)?null:"position"===t?(0,r.toLnglat)(n):"offset"===t?(0,r.toPixel)(n):n},d=t.renderMarkerComponent=function e(t,n){var r=t,o;(0,l.default)(t)&&(r=t(n.getExtData()));r&&(0,a.render)(i.default.createElement("div",null,r),n.getContent())}},17:function(e,t){e.exports=window.ReactDOM},18:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i,a=c(n(1)),u,l=c(n(332));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e){return function(t){function n(e){s(this,n);var t=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.instanceCreated=!1,t.myMapComponent=null,t.registeredEvents=[],t.onInstanceCreated=t.onInstanceCreated.bind(t),t}return p(n,t),o(n,[{key:"onInstanceCreated",value:function e(){if(this.instanceCreated=!0,"events"in this.props){var t=this.myMapComponent.instance;this.props.events.created&&this.props.events.created(t)}this.reactivePropChange(this.props,!1)}},{key:"createEventsProxy",value:function e(t){var n=this,r=this.myMapComponent.instance,o=Object.keys(t.events||{});o.length&&o.forEach((function(e){-1===n.registeredEvents.indexOf(e)&&(n.registeredEvents.push(e),r.on(e,function(e){return function(){if(n.props.events&&e in n.props.events){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];n.props.events[e].apply(null,r)}}}(e)))}))}},{key:"componentWillReceiveProps",value:function e(t){this.reactivePropChange(t,!0)}},{key:"reactivePropChange",value:function e(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.instanceCreated)return!1;var o=this.myMapComponent,i=o.setterMap,a=void 0===i?{}:i,u=o.converterMap,c=void 0===u?{}:u,s=o.instance,f=void 0===s?{}:s,p=Object.keys(t);p.length&&p.forEach((function(e){if("events"===e)return n.createEventsProxy(t);var o=!0;if(r&&(o=n.detectPropChange(e,t,n.props)),!o)return!1;var i=t[e];if(e in c&&(i=c[e](t[e])),e in a)a[e](i);else{var u="set"+(0,l.default)(e);u in f&&f[u](i)}}))}},{key:"detectPropChange",value:function e(t,n,r){return n[t]!==r[t]}},{key:"render",value:function t(){var n=this;return a.default.createElement(e,r({onInstanceCreated:this.onInstanceCreated,ref:function e(t){n.myMapComponent=t}},this.props))}},{key:"componentWillUnmount",value:function e(){var t=this.myMapComponent.instance;t&&("destroy"in t&&setTimeout((function(){t.destroy()}),10),"hide"in t&&t.hide(),"__map__"in this.props&&"setMap"in t&&t.setMap(null))}}]),n}(a.default.Component)}t.default=d},27:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"!=typeof window,o=t.toLnglat=function e(t){if(!t)return t;if("getLng"in t&&"getLat"in t)return t;var n=0,o=0;return"[object Array]"==={}.toString.call(t)?(n=t[0],o=t[1]):"lng"in t&&"lat"in t?(n=t.lng,o=t.lat):"longitude"in t&&"latitude"in t&&(n=t.longitude,o=t.latitude),r?new window.AMap.LngLat(n,o):null},i=t.toPixel=function e(t){if(!t)return t;if("getX"in t&&"getY"in t)return t;var n=0,o=0;return"[object Array]"==={}.toString.call(t)?(n=t[0],o=t[1]):"x"in t&&"y"in t&&(n=t.x,o=t.y),r?new window.AMap.Pixel(n,o):null},a=t.toSize=function e(t){return t?"getWidth"in t?t:r?new window.AMap.Size(t.width,t.height):null:t};t.default={toLnglat:o,toPixel:i,toSize:a}},329:function(e,t,n){e.exports=n(426)},330:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i,a=y(n(1)),u,l=y(n(331)),c,s=y(n(69)),f,p=y(n(15)),d=n(27),h,v=y(n(18));function y(e){return e&&e.__esModule?e:{default:e}}function m(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=a.default.Component,k=a.default.Children,C={width:"100%",height:"100%"},M={width:"100%",height:"100%",position:"relative"},E,O=["animateEnable","doubleClickZoom","dragEnable","isHotspot","jogEnable","keyboardEnable","resizeEnable","rotateEnable","scrollWheel","touchZoom","zoomEnable"],P=["view","zooms","showIndoorMap","indoorMap","expandZoomRange","showBuildingBlock","viewMode","pitchEnable","buildingAnimation","skyColor"],j=["layers","zoom","center","labelzIndex","mapStyle","features","cursor","pitch"].concat(O,P),x={MapType:{showRoad:!1,showTraffic:!1,defaultType:0},ToolBar:{position:"RB",noIpLocate:!0,locate:!0,liteStyle:!0,autoPosition:!1},OverView:{},ControlBar:{}},I=function(e){function t(e){b(this,t);var n=w(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={mapLoaded:!1};var r=n;return n.setterMap={zoom:function e(t){r.map.setZoom(t)},cursor:function e(t){r.map.setDefaultCursor(t)},labelzIndex:function e(t){r.map.setlabelzIndex(t)}},n.converterMap={center:d.toLnglat},"undefined"!=typeof window&&(n.pluginMap={},new l.default({key:e.amapkey,useAMapUI:e.useAMapUI,version:e.version,protocol:e.protocol}).load().then((function(){n.createInstance(),n.state.mapLoaded||n.setState({mapLoaded:!0})}))),n}return g(t,e),o(t,[{key:"componentWillReceiveProps",value:function e(t){this.state.mapLoaded&&this.updateMapProps(this.props,t)}},{key:"renderChildren",value:function e(){var t=this;return k.map(this.props.children,(function(e){if(e){var n=e.type;return n.preventAmap||"string"==typeof n?e:a.default.cloneElement(e,{__map__:t.map})}return e}))}},{key:"createInstance",value:function e(){if(!this.map){var t=this.buildCreateOptions();this.map=new window.AMap.Map(this.mapWrapper,t),this.setPlugins(this.props),this.props.onInstanceCreated&&this.props.onInstanceCreated()}}},{key:"buildCreateOptions",value:function e(){var t=this,n=this.props,r={};return j.forEach((function(e){e in n&&(r[e]=t.getSetterValue(e,n))})),r}},{key:"updateMapProps",value:function e(t,n){var r=this,o={},i=!1,a=!1;O.forEach((function(e){e in n&&(a=!0,r.detectPropChanged(e,t,n)&&(i=!0,o[e]=n[e]))})),i&&this.map.setStatus(o),a&&"status"in n&&p.default.warning("\u4ee5\u4e0b\u8fd9\u4e9b\u5c5e\u6027\u53ef\u4ee5\u5355\u72ec\u63d0\u4f9b\u8fdb\u884c\u914d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u7edf\u4e00\u4f5c\u4e3a\u2018status\u2019\u5c5e\u6027\u914d\u7f6e\uff1b\u4f46\u662f\u8bf7\u4e0d\u8981\u540c\u65f6\u4f7f\u7528\u8fd9\u4e24\u79cd\u65b9\u5f0f\u3002\n\uff08"+O.join(", ")+"\uff09"),P.forEach((function(e){e in n&&r.detectPropChanged(e,t,n)&&p.default.warning("'"+e+"' \u662f\u4e00\u4e2a\u9759\u6001\u5c5e\u6027\uff0c\u5730\u56fe\u5b9e\u4f8b\u521b\u5efa\u6210\u529f\u540e\u65e0\u6cd5\u4fee\u6539")})),this.setPlugins(n)}},{key:"getSetterValue",value:function e(t,n){return t in this.converterMap?this.converterMap[t](n[t]):n[t]}},{key:"detectPropChanged",value:function e(t,n,r){return n[t]!==r[t]}},{key:"setPlugins",value:function e(t){var n=this,r=["Scale","ToolBar","MapType","OverView","ControlBar"];if("plugins"in t){var o=t.plugins;o&&o.length&&o.forEach((function(e){var t=void 0,o=void 0,i=void 0;"string"==typeof e?(t=e,o=null,i=!0):(t=e.name,i=!("visible"in(o=e.options||{}))||"boolean"!=typeof o.visible||o.visible,delete o.visible);var a=r.indexOf(t);-1===a?p.default.warning("\u6ca1\u6709 \u2018"+t+"\u2019 \u8fd9\u4e2a\u63d2\u4ef6\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u62fc\u5199\u9519\u8bef"):i&&(r.splice(a,1),n.installPlugin(t,o))}))}this.removeOrDisablePlugins(r)}},{key:"removeOrDisablePlugins",value:function e(t){var n=this;t&&t.length&&t.forEach((function(e){e in n.pluginMap&&("ControlBar"===e?(n.map.removeControl(n.pluginMap[e]),delete n.pluginMap[e]):n.pluginMap[e].hide())}))}},{key:"installPlugin",value:function e(t,n){switch(n=n||{},t){case"Scale":case"ToolBar":case"OverView":case"MapType":this.setMapPlugin(t,n);break;case"ControlBar":this.setControlBar(n)}}},{key:"setMapPlugin",value:function e(t,n){var o=this;if(this.pluginMap[t])this.pluginMap[t].show();else{var i=n.onCreated,a=m(n,["onCreated"]),u=r({},x[t],a);this.map.plugin(["AMap."+t],(function(){o.pluginMap[t]=new window.AMap[t](u),o.map.addControl(o.pluginMap[t]),(0,s.default)(i)&&i(o.pluginMap[t])}))}}},{key:"setControlBar",value:function e(t){var n=this;if(this.pluginMap.ControlBar);else{var o=t.onCreated,i=m(t,["onCreated"]),a=r({},x.ControlBar,i);this.map.plugin(["AMap.ControlBar"],(function(){n.pluginMap.ControlBar=new window.AMap.ControlBar(a),n.map.addControl(n.pluginMap.ControlBar),(0,s.default)(o)&&o(n.pluginMap.ControlBar)}))}}},{key:"render",value:function e(){var t=this;return a.default.createElement("div",{style:M},a.default.createElement("div",{ref:function e(n){t.mapWrapper=n},style:C},this.state.mapLoaded?null:this.props.loading||null),a.default.createElement("div",null,this.state.mapLoaded?this.renderChildren():null))}},{key:"instance",get:function e(){return this.map}}]),t}(_);t.default=(0,v.default)(I)},331:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a={v:"1.4.0",hostAndPath:"webapi.amap.com/maps",key:"f97efc35164149d0c0f299e7a8adb3d2",callback:"__amap_init_callback",useAMapUI:!1},u=null,l=null,c=!1,s=function(){function e(t){var n=t.key,o=t.useAMapUI,u=t.version,l=t.protocol;i(this,e),this.config=r({},a,{useAMapUI:o,protocol:l}),"undefined"!=typeof window&&(n?this.config.key=n:"amapkey"in window&&(this.config.key=window.amapkey)),u&&(this.config.v=u),this.protocol=l||window.location.protocol,-1===this.protocol.indexOf(":")&&(this.protocol+=":")}return o(e,[{key:"getScriptSrc",value:function e(t){return this.protocol+"//"+t.hostAndPath+"?v="+t.v+"&key="+t.key+"&callback="+t.callback}},{key:"buildScriptTag",value:function e(t){var n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.defer=!0,n.src=t,n}},{key:"getAmapuiPromise",value:function e(){var t=this.buildScriptTag(this.protocol+"//webapi.amap.com/ui/1.0/main-async.js"),n=new Promise((function(e){t.onload=function(){e()}}));return document.body.appendChild(t),n}},{key:"getMainPromise",value:function e(){var t=this,n=this.buildScriptTag(this.getScriptSrc(this.config)),r=new Promise((function(e){window[t.config.callback]=function(){e(),delete window[t.config.callback]}}));return document.body.appendChild(n),r}},{key:"load",value:function e(){if("undefined"==typeof window)return null;var t=this.config.useAMapUI;return u=u||this.getMainPromise(),t&&(l=l||this.getAmapuiPromise()),new Promise((function(e){u.then((function(){t&&l?l.then((function(){window.initAMapUI&&!c&&(window.initAMapUI(),"function"==typeof t&&t(),c=!0),e()})):e()}))}))}}]),e}();t.default=s},332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){return t[0].toUpperCase()+t.slice(1,t.length)};t.default=r},333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i,a=h(n(1)),u=n(17),l,c=h(n(15)),s,f=h(n(18)),p=n(165),d=n(27);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(e){v(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!=typeof window)if(e.__map__){var r=n;n.setterMap={visible:function e(t){t?r.marker&&r.marker.show():r.marker&&r.marker.hide()},zIndex:function e(t){r.marker&&r.marker.setzIndex(t)}},n.converterMap={position:d.toLnglat,offset:d.toPixel},n.map=e.__map__,n.element=n.map.getContainer(),setTimeout((function(){n.createMarker(e)}),13)}else c.default.warning("MAP_INSTANCE_REQUIRED");return n}return m(t,e),o(t,[{key:"shouldComponentUpdate",value:function e(){return!1}},{key:"componentWillReceiveProps",value:function e(t){this.map&&this.refreshMarkerLayout(t)}},{key:"createMarker",value:function e(t){var n=this.buildCreateOptions(t),r;this.marker=new window.AMap.Marker(n),this.marker.render=(r=this.marker,function(e){(0,p.renderMarkerComponent)(e,r)}),this.props.onInstanceCreated&&this.props.onInstanceCreated(),this.setMarkerLayout(t),this.setChildComponent(t)}},{key:"buildCreateOptions",value:function e(t){var n=this,r={};return p.MarkerAllProps.forEach((function(e){e in t&&(r[e]=n.getSetterParam(e,t[e]))})),r.map=this.map,r}},{key:"setMarkerLayout",value:function e(t){("render"in t||"children"in t&&t.children)&&(this.createContentWrapper(),"className"in t&&t.className&&(this.contentWrapper.className=t.className))}},{key:"createContentWrapper",value:function e(){this.contentWrapper=document.createElement("div"),this.marker.setContent(this.contentWrapper)}},{key:"setChildComponent",value:function e(t){if(this.contentWrapper)if("className"in t&&t.className&&(this.contentWrapper.className=t.className),"render"in t)(0,p.renderMarkerComponent)(t.render,this.marker);else if("children"in t){var n=t.children,o;"undefined"!==(void 0===n?"undefined":r(n))&&this.contentWrapper&&(0,u.render)(a.default.createElement("div",null,n),this.contentWrapper)}}},{key:"refreshMarkerLayout",value:function e(t){this.setChildComponent(t)}},{key:"getSetterParam",value:function e(t,n){return t in this.converterMap?this.converterMap[t](n):n}},{key:"render",value:function e(){return null}},{key:"instance",get:function e(){return this.marker}}]),t}(a.default.Component);t.default=(0,f.default)(b)},334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o,i=p(n(1)),a=n(17),u,l=p(n(69)),c,s=p(n(15)),f=n(165);function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if("undefined"!=typeof window){var y=".amap_markers_pop_window{\n    padding: 10px;\n    border: 1px solid #ddd;\n    border-radius: 8px;\n    background: #fff;\n    position: relative;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: flex-start;\n}\n.amap_markers_pop_window::before{\n    content: ' ';\n    display: block;\n    position: absolute;\n    bottom: -12px;\n    left: 50%;\n    margin-left: -7px;\n    width: 0;\n    height: 0;\n    border-top: 12px solid #ddd;\n    border-left: 7px solid transparent;\n    border-right: 7px solid transparent;\n}\n.amap_markers_pop_window::after{\n    content: ' ';\n    display: block;\n    position: absolute;\n    bottom: -11px;\n    left: 50%;\n    margin-left: -6px;\n    width: 0;\n    height: 0;\n    border-top: 11px solid #fff;\n    border-left: 6px solid transparent;\n    border-right: 6px solid transparent;\n}\n.amap_markers_pop_window_item{\n    cursor:pointer;\n    width: 40px;\n    height: 50px;\n    display: flex;\n    align-items: flex-end;\n    justify-content: center;\n}\n.amap_markers_pop_window_item span{\n    pointer-events: none;\n}\n.amap_markers_window_overflow_warning{\n    text-align: center;\n    width: 100%;\n    margin: 5px 0;\n    color: #666;\n}",m=document.head||document.getElementsByTagName("head")[0],b=document.createElement("style");b.type="text/css",b.textContent=y,m.appendChild(b)}var w=i.default.Component,g=.8,_=25.6,k=46*.8-2,C=46*.8,M=66*.8-2,E=42,O=!1,P=[],j=[],x=["gridSize","minClusterSize","maxZoom","averageCenter","styles","zoomOnClick","renderCluserMarker"],I="__react_amap__",S=function(e){function t(e){d(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"undefined"!=typeof window&&(e.__map__?(n.map=e.__map__,n.element=n.map.getContainer(),n.markersCache=P,n.useCluster=null,n.markerIDCache=j,n.resetOffset=new window.AMap.Pixel(-12.8,-(46*.8-2)),n.hoverOffset=new window.AMap.Pixel(-46*.8/2,-(66*.8-2)),n.createMarkers(e)):s.default.warning("MAP_INSTANCE_REQUIRED")),n}return v(t,e),r(t,[{key:"shouldComponentUpdate",value:function e(){return!1}},{key:"createMarkers",value:function e(t){var n=this,r=t.markers||[],o=[],i={};r.length&&r.forEach((function(e,r){var a=n.buildCreateOptions(t,e,r);a.map=n.map;var u=null;if((0,l.default)(t.render)){var c=t.render(e);if(!1!==c){var s=document.createElement("div");s.setAttribute(I,"1"),u=s,i[r]=c}}if(!u){u=document.createElement("div");var p=document.createElement("img");p.src="//webapi.amap.com/theme/v1.3/markers/n/mark_bs.png",u.appendChild(p)}a.content=u;var d=new window.AMap.Marker(a);d.on("click",(function(e){n.onMarkerClick(e)})),d.on("mouseover",(function(e){n.onMarkerHover(e)})),d.on("mouseout",(function(e){n.onMarkerHoverOut(e)})),d.render=function(e){return function(t){return(0,f.renderMarkerComponent)(t,e)}}(d),n.bindMarkerEvents(d),o.push(d)})),this.markersCache=o,this.markerReactChildDOM=i,this.exposeMarkerInstance(),this.checkClusterSettings(t)}},{key:"checkClusterSettings",value:function e(t){var n=this;if(t.useCluster)this.loadClusterPlugin(t.useCluster).then((function(e){e.setMarkers(n.markersCache)}));else if(this.mapCluster){var r=this.mapCluster.getMarkers();this.mapCluster.clearMarkers(),r.forEach((function(e){e.setMap(n.map)}))}}},{key:"componentDidMount",value:function e(){this.map&&this.setMarkerChild()}},{key:"setMarkerChild",value:function e(){var t=this;Object.keys(this.markerReactChildDOM).forEach((function(e){var n=t.markersCache[e].getContent(),r=t.markerReactChildDOM[e];t.renderMarkerChild(n,r)}))}},{key:"renderMarkerChild",value:function e(t,n){(0,a.render)(i.default.createElement("div",null,n),t)}},{key:"buildCreateOptions",value:function e(t,n,r){var o={},i=["extData"];return f.MarkerAllProps.forEach((function(e){if(e in n&&-1===i.indexOf(e))o[e]=(0,f.getPropValue)(e,n[e]);else if(e in t)if((0,l.default)(t[e])){var a=t[e].call(null,n,r);o[e]=(0,f.getPropValue)(e,a)}else o[e]=(0,f.getPropValue)(e,t[e])})),o.extData=n,o}},{key:"componentWillReceiveProps",value:function e(t){this.map&&this.refreshMarkersLayout(t)}},{key:"refreshMarkersLayout",value:function e(t){var n=t.markers!==this.props.markers,r=!!this.props.useCluster!=!!t.useCluster;n&&(this.markersCache.length&&this.markersCache.forEach((function(e){e&&(e.setMap(null),e=null)})),this.markersCache=P,this.createMarkers(t),this.setMarkerChild()),(n||r)&&this.markersWindow&&this.markersWindow.close(),r&&this.checkClusterSettings(t)}},{key:"loadClusterPlugin",value:function e(t){var n=this;if(this.mapCluster)return Promise.resolve(this.mapCluster);var r="boolean"==typeof t?{}:t;return new Promise((function(e){n.map.plugin(["AMap.MarkerClusterer"],(function(){e(n.createClusterPlugin(r))}))}))}},{key:"createClusterPlugin",value:function e(t){var n={},r={minClusterSize:2,zoomOnClick:!1,maxZoom:18,gridSize:60,averageCenter:!0};x.forEach((function(e){n[e]=e in t?t[e]:r[e]})),this.mapCluster=new window.AMap.MarkerClusterer(this.map,[],n);var o={};return"events"in t&&"created"in(o=t.events)&&o.created(this.mapCluster),this.initClusterMarkerWindow(),this.bindClusterEvent(o),this.mapCluster}},{key:"onMarkerClick",value:function e(t){var n=t.target;this.triggerMarkerClick(t,n)}},{key:"onMarkerHover",value:function e(t){t.target.setTop(!0),this.setMarkerHovered(t,t.target)}},{key:"onMarkerHoverOut",value:function e(t){t.target.setTop(!1),this.setMarkerHoverOut(t,t.target)}},{key:"onWindowMarkerClick",value:function e(t){var n=t.markerRef;this.triggerMarkerClick(null,n)}},{key:"onWindowMarkerHover",value:function e(t){var n=t.markerRef;this.setMarkerHovered(null,n)}},{key:"onWindowMarkerHoverOut",value:function e(t){var n=t.markerRef;this.setMarkerHoverOut(null,n)}},{key:"setMarkerHovered",value:function e(t,n){this.triggerMarkerHover(t,n)}},{key:"setMarkerHoverOut",value:function e(t,n){this.triggerMarkerHoverOut(t,n)}},{key:"triggerMarkerClick",value:function e(t,n){var r=this.props.events||{};(0,l.default)(r.click)&&r.click(t,n)}},{key:"triggerMarkerHover",value:function e(t,n){var r=this.props.events||{};(0,l.default)(r.mouseover)&&r.mouseover(t,n)}},{key:"triggerMarkerHoverOut",value:function e(t,n){var r=this.props.events||{};(0,l.default)(r.mouseout)&&r.mouseout(t,n)}},{key:"initClusterMarkerWindow",value:function e(){this.markersWindow=new window.AMap.InfoWindow({isCustom:!0,autoMove:!0,closeWhenClickMap:!0,content:"<span>loading...</span>",showShadow:!1,offset:new window.AMap.Pixel(0,-20)}),this.markersDOM=document.createElement("div"),this.markersDOM.className="amap_markers_pop_window",this.markersWindow.setContent(this.markersDOM)}},{key:"bindClusterEvent",value:function e(t){var n=this;this.mapCluster.on("click",(function(e){if(n.props.useCluster&&n.props.useCluster.zoomOnClick);else{var r=!0;(0,l.default)(t.click)&&(r=t.click(e)),!1!==r&&n.showMarkersInfoWindow(e)}}))}},{key:"showMarkersInfoWindow",value:function e(t){var n=this,r=t.lnglat,o=t.markers;if(this.markersDOM.innerHTML="",o&&o.length){var i=o.length;if(i>42&&(o=o.slice(0,42)),o.forEach((function(e){var t=e.getContent(),r=document.createElement("div");r.className="window_marker_item",r.appendChild(t),r.markerRef=e,r.addEventListener("click",n.onWindowMarkerClick.bind(n,r),!0),r.addEventListener("mouseover",n.onWindowMarkerHover.bind(n,r),!0),r.addEventListener("mouseout",n.onWindowMarkerHoverOut.bind(n,r),!0),n.markersDOM.appendChild(r)})),i>42){var a=document.createElement("div");a.className="amap_markers_window_overflow_warning",a.innerText="\u66f4\u591a\u5750\u6807\u8bf7\u653e\u5927\u5730\u56fe\u67e5\u770b",this.markersDOM.appendChild(a)}}this.markersWindow.open(this.map,r)}},{key:"exposeMarkerInstance",value:function e(){if("events"in this.props){var t=this.props.events||{};(0,l.default)(t.created)&&t.created(this.markersCache)}}},{key:"bindMarkerEvents",value:function e(t){var n=this.props.events||{},r=Object.keys(n),o=["click","mouseover","mouseout","created"];r.length&&r.forEach((function(e){-1===o.indexOf(e)&&t.on(e,n[e])}))}},{key:"render",value:function e(){return null}}]),t}(w);t.default=S},335:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o,i=f(n(1)),a,u=f(n(18)),l,c=f(n(15)),s=n(27);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v,y=["center","radius","draggable","extData","visible","style"].concat(["zIndex","bubble"]),m=function(e){function t(e){p(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!=typeof window)if(e.__map__){var r=n;n.setterMap={visible:function e(t){r.mapCircle&&(t?r.mapCircle.show():r.mapCircle.hide())},style:function e(t){r.mapCircle&&r.mapCircle.setOptions(t)}},n.converterMap={center:s.toLnglat},n.state={loaded:!1},n.map=e.__map__,n.element=n.map.getContainer(),n.createInstance(e).then((function(){n.setState({loaded:!0}),n.props.onInstanceCreated&&n.props.onInstanceCreated()}))}else c.default.warning("MAP_INSTANCE_REQUIRED");return n}return h(t,e),r(t,[{key:"createInstance",value:function e(t){var n=this.buildCreateOptions(t);return n.map=this.map,this.mapCircle=new window.AMap.Circle(n),Promise.resolve(this.mapCircle)}},{key:"buildCreateOptions",value:function e(t){var n=this,r={};return y.forEach((function(e){var o;e in t&&("style"===e&&void 0!==t.style?Object.keys(t.style).forEach((function(e){r[e]=t.style[e]})):r[e]=n.getSetterValue(e,t))})),r}},{key:"getSetterValue",value:function e(t,n){return t in this.converterMap?this.converterMap[t](n[t]):n[t]}},{key:"renderEditor",value:function e(t){return t?1!==i.default.Children.count(t)?null:i.default.cloneElement(i.default.Children.only(t),{__circle__:this.mapCircle,__map__:this.map,__ele__:this.element}):null}},{key:"render",value:function e(){return this.state.loaded?this.renderEditor(this.props.children):null}},{key:"instance",get:function e(){return this.mapCircle}}]),t}(i.default.Component);t.default=(0,u.default)(m)},336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),i=d(o),a,u=d(n(18)),l,c=d(n(15)),s,f=d(n(78)),p=n(27);function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m,b=["path","draggable","extData","style","visible"].concat(["zIndex","bubble"]),w=function(e){function t(e){h(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!=typeof window)if(e.__map__){var r=n;n.setterMap={visible:function e(t){t?r.polygon&&r.polygon.show():r.polygon&&r.polygon.hide()},style:function e(t){r.polygon.setOptions(t)}},n.converterMap={path:function e(t){return r.buildPathValue(t)}},n.state={loaded:!1},n.map=e.__map__,n.element=n.map.getContainer(),setTimeout((function(){n.initMapPolygon(e)}),13)}else c.default.warning("MAP_INSTANCE_REQUIRED");return n}return y(t,e),r(t,[{key:"initMapPolygon",value:function e(t){var n=this.buildCreateOptions(t);n.map=this.map,this.polygon=new window.AMap.Polygon(n),this.setState({loaded:!0}),this.props.onInstanceCreated&&this.props.onInstanceCreated()}},{key:"buildCreateOptions",value:function e(t){var n=this,r={};return b.forEach((function(e){var o;e in t&&("style"===e&&t.style?Object.keys(t.style).forEach((function(e){r[e]=t.style[e]})):"visible"!==e&&(r[e]=n.getSetterValue(e,t[e])))})),r}},{key:"detectPropChanged",value:function e(t,n){return this.props[t]!==n[t]}},{key:"getSetterValue",value:function e(t,n){return t in this.converterMap?this.converterMap[t](n):n}},{key:"buildPathValue",value:function e(t){var n=this;if(t.length){var r=t[0];if("number"==typeof r[0])return t.map((function(e){return(0,p.toLnglat)(e)}));if("getLng"in r)return t;if("longitude"in r||"lng"in r)return t.map((function(e){return(0,p.toLnglat)(e)}));if("length"in r&&r.length)return t.map((function(e){return n.buildPathValue(e)}))}return[]}},{key:"renderEditor",value:function e(t){if(!t)return null;if(1!==i.default.Children.count(t))return null;var n=i.default.Children.only(t);return n.type===f.default?i.default.cloneElement(n,{__poly__:this.polygon,__map__:this.map}):null}},{key:"render",value:function e(){return this.state.loaded?this.renderEditor(this.props.children):null}},{key:"instance",get:function e(){return this.polygon}}]),t}(o.Component);t.default=(0,u.default)(w)},337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o,i=d(n(1)),a,u=d(n(18)),l,c=d(n(15)),s,f=d(n(78)),p=n(27);function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=i.default.Component,b,w=["path","extData","draggable","visible","style"].concat(["zIndex","bubble","showDir"]),g=function(e){function t(e){h(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!=typeof window)if(e.__map__){var r=n;n.setterMap={visible:function e(t){t?r.polyline&&r.polyline.show():r.polyline&&r.polyline.hide()},style:function e(t){r.polyline.setOptions(t)}},n.converterMap={path:function e(t){return r.buildPathValue(t)}},n.state={loaded:!1},n.map=e.__map__,n.element=n.map.getContainer(),setTimeout((function(){n.createMapPolyline(e)}),13)}else c.default.warning("MAP_INSTANCE_REQUIRED");return n}return y(t,e),r(t,[{key:"createMapPolyline",value:function e(t){var n=this.buildCreateOptions(t);n.map=this.map,this.polyline=new window.AMap.Polyline(n),this.setState({loaded:!0}),this.props.onInstanceCreated&&this.props.onInstanceCreated()}},{key:"buildCreateOptions",value:function e(t){var n=this,r={};return w.forEach((function(e){var o;e in t&&("style"===e&&t.style?Object.keys(t.style).forEach((function(e){r[e]=t.style[e]})):"visible"!==e&&(r[e]=n.getSetterValue(e,t[e])))})),r}},{key:"detectPropChanged",value:function e(t,n){return this.props[t]!==n[t]}},{key:"getSetterValue",value:function e(t,n){return t in this.converterMap?this.converterMap[t](n):n}},{key:"buildPathValue",value:function e(t){return t.length?"getLng"in t[0]?t:t.map((function(e){return(0,p.toLnglat)(e)})):t}},{key:"renderEditor",value:function e(t){if(!t)return null;if(1!==i.default.Children.count(t))return null;var n=i.default.Children.only(t);return n.type===f.default?i.default.cloneElement(n,{__poly__:this.polyline,__map__:this.map}):null}},{key:"render",value:function e(){return this.state.loaded?this.renderEditor(this.props.children):null}},{key:"instance",get:function e(){return this.polyline}}]),t}(m);t.default=(0,u.default)(g)},338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o,i=p(n(1)),a=n(17),u,l=p(n(18)),c,s=p(n(15)),f=n(27);function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=i.default.Component,m,b=["content","position","size","visible","offset"].concat(["isCustom","autoMove","closeWhenClickMap","showShadow"]),w=function(e){function t(e){d(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!=typeof window)if(e.__map__){var r=n;n.setterMap={visible:function e(t){t?(r.showWindow(),r.setClassName(r.props),r.setChild(r.props)):r.closeWindow()}},n.converterMap={size:f.toSize,offset:f.toPixel,position:f.toLnglat},n.map=e.__map__,n.isCustom=!0,setTimeout((function(){n.createInfoWindow(e)}),13)}else s.default.warning("MAP_INSTANCE_REQUIRED");return n}return v(t,e),r(t,[{key:"shouldComponentUpdate",value:function e(){return!1}},{key:"componentWillReceiveProps",value:function e(t){this.map&&this.refreshWindowLayout(t)}},{key:"createInfoWindow",value:function e(t){var n=this.buildCreateOptions(t);this.infoWindow=new window.AMap.InfoWindow(n),this.props.onInstanceCreated&&this.props.onInstanceCreated()}},{key:"refreshWindowLayout",value:function e(t){this.setChild(t),this.setClassName(t)}},{key:"checkPropChanged",value:function e(t,n){return this.props[t]!==n[t]}},{key:"showWindow",value:function e(){this.infoWindow.open(this.map,this.infoWindow.getPosition())}},{key:"closeWindow",value:function e(){this.infoWindow.close()}},{key:"buildCreateOptions",value:function e(t){var n=this,r={};return r.isCustom="isCustom"in t&&!!t.isCustom,"content"in t?r.content=t.content:(this.infoDOM=document.createElement("div"),r.content=this.infoDOM),b.forEach((function(e){e in t&&-1===["visible","isCustom","content"].indexOf(e)&&(r[e]=n.getSetterValue(e,t[e]))})),r}},{key:"getSetterValue",value:function e(t,n){return t in this.converterMap?this.converterMap[t](n):n}},{key:"setChild",value:function e(t){var n=t.children;this.infoDOM&&n?(0,a.render)(i.default.createElement("div",null,n),this.infoDOM):t.children&&console.warn("\u56e0\u4e3a\u4f60\u8bbe\u7f6e isCustom \u4e3a true\uff0cInfoWindow \u7684 Children \u88ab\u5ffd\u7565")}},{key:"setClassName",value:function e(t){if(this.infoDOM){var n="";"className"in t&&t.className?n+=t.className:!0===t.isCustom&&(n+="amap_markers_pop_window"),this.infoDOM.className=n}}},{key:"render",value:function e(){return null}},{key:"instance",get:function e(){return this.infoWindow}}]),t}(y);t.default=(0,l.default)(w)},339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o,i=s(n(1)),a,u=s(n(18)),l,c=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=!1,v=1,y=!0,m=function(e){function t(e){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!=typeof window)if(e.__map__){var r=n;n.setterMap={visible:function e(t){t?r.image&&r.image.show():r.image&&r.image.hide()},src:function e(t){r.image.setImageUrl(t)}},n.converterMap={bounds:function e(t){return r.buildBounds(t)}},n.map=e.__map__,n.element=n.map.getContainer(),setTimeout((function(){n.createGroundImage(e)}),13)}else c.default.warning("MAP_INSTANCE_REQUIRED");return n}return d(t,e),r(t,[{key:"shouldComponentUpdate",value:function e(){return!1}},{key:"checkPropsChanged",value:function e(t,n){return this.props[n]!==t[n]}},{key:"createGroundImage",value:function e(t){var n=void 0,r=void 0,o=void 0,i=void 0;"src"in t?n=t.src:c.default.warning("SRC_REQUIRED",!0),"bounds"in t?r=this.buildBounds(t.bounds):c.default.warning("BOUNDS_REQUIRED",!0),i="clickable"in t?t.clickable:h,o="opacity"in t?t.opacity:v,this.image=new window.AMap.GroundImage(n,r,{map:this.map,clickable:i,opacity:o}),this.props.onInstanceCreated&&this.props.onInstanceCreated()}},{key:"buildBounds",value:function e(t){return t?"getSouthWest"in t?t:new window.AMap.Bounds(new window.AMap.LngLat(t.sw.longitude,t.sw.latitude),new window.AMap.LngLat(t.ne.longitude,t.ne.latitude)):t;var n}},{key:"render",value:function e(){return null}},{key:"instance",get:function e(){return this.image}}]),t}(i.default.Component);t.default=(0,u.default)(m)},340:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o,i=s(n(1)),a,u=s(n(15)),l,c=s(n(69));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(e){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"undefined"!=typeof window&&(e.__map__&&e.__circle__?(n.map=e.__map__,n.element=n.map.getContainer(),n.circle=e.__circle__,n.editorActive=!1,n.onPropsUpdate(e)):u.default.warning("CIRCLE_INSTANCE_REQUIRED")),n}return d(t,e),r(t,[{key:"componentWillReceiveProps",value:function e(t){this.map&&this.onPropsUpdate(t)}},{key:"onPropsUpdate",value:function e(t){"active"in t&&!1===t.active?this.toggleActive(!1,t):this.toggleActive(!0,t)}},{key:"toggleActive",value:function e(t,n){t?this.editorActive||this.activeEditor(n):this.editorActive&&this.inactiveEditor()}},{key:"activeEditor",value:function e(t){var n=this;this.loadCircleEditor(t).then((function(e){n.editorActive=!0,e.open()}))}},{key:"inactiveEditor",value:function e(){this.editorActive=!1,this.circleEditor&&this.circleEditor.close()}},{key:"loadCircleEditor",value:function e(t){var n=this;return this.circleEditor?Promise.resolve(this.circleEditor):new Promise((function(e){n.map.plugin(["AMap.CircleEditor"],(function(){e(n.createEditorInstance(t))}))}))}},{key:"createEditorInstance",value:function e(t){this.circleEditor=new window.AMap.CircleEditor(this.map,this.circle);var n=this.exposeEditorInstance(t);return n&&this.bindEditorEvents(n),this.circleEditor}},{key:"exposeEditorInstance",value:function e(t){if("events"in t){var n=t.events||{};return(0,c.default)(n.created)&&n.created(this.circleEditor),delete n.created,n}return!1}},{key:"bindEditorEvents",value:function e(t){var n=this,r=Object.keys(t);r.length&&r.forEach((function(e){n.circleEditor.on(e,t[e])}))}},{key:"render",value:function e(){return null}}]),t}(i.default.Component);t.default=h},341:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o,i=s(n(1)),a,u=s(n(18)),l,c=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(e){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"undefined"!=typeof window&&(e.__map__?(n.map=e.__map__,n.loadToolInstance().then((function(){n.props.onInstanceCreated&&n.props.onInstanceCreated()}))):c.default.warning("MAP_INSTANCE_REQUIRED")),n}return d(t,e),r(t,[{key:"shouldComponentUpdate",value:function e(){return!1}},{key:"loadToolInstance",value:function e(){var t=this;return new Promise((function(e){t.map.plugin(["AMap.MouseTool"],(function(){t.tool=new window.AMap.MouseTool(t.map),e()}))}))}},{key:"render",value:function e(){return null}},{key:"instance",get:function e(){return this.tool}}]),t}(i.default.Component);t.default=(0,u.default)(h)},426:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var r={};n.r(r),n.d(r,"default",(function(){return g}));var o=n(1),i=n.n(o),a=n(163),u=n(44),l=n.n(u);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */s=function t(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function e(t,n,r){return t[n]=r}}function f(e,t,n,o){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(o||[]);return r(a,"_invoke",{value:C(e,n,u)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function h(){}function v(){}function y(){}var m={};l(m,i,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(j([])));w&&w!==t&&n.call(w,i)&&(m=w);var g=y.prototype=h.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function o(r,i,a,u){var l=p(e[r],e,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==c(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function e(n,r){function a(){return new t((function(e,t){o(n,r,e,t)}))}return i=i?i.then(a,a):a()}})}function C(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return x()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=M(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=p(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function M(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,M(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=p(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return v.prototype=y,r(g,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(k.prototype),l(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new k(f(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(g),l(g,u,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=j,P.prototype={constructor:P,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var r=this;function o(e,n){return u.type="throw",u.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function e(t,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=t,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),d},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var i=o.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function f(e,t){return y(e)||v(e,t)||d(e,t)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}function y(e){if(Array.isArray(e))return e}var m=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function u(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?n(e.value):o(e.value).then(a,u)}l((r=r.apply(e,t||[])).next())}))},b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},w,g=function e(t){var n=t.mapAK,r=t.mapStyle,u=t.infoDatas,c=t.infoStyle,p=t.dataRequest,d=t.zoom,h=void 0===d?12:d,v=t.markImgs,y=b(t,["mapAK","mapStyle","infoDatas","infoStyle","dataRequest","zoom","markImgs"]);console.log("props",t);var w,g=f(Object(o.useState)(),2),_=g[0],k=g[1],C,M=f(Object(o.useState)(),2),E=M[0],O=M[1],P,j=f(Object(o.useState)([]),2),x=j[0],I=j[1],S,A=f(Object(o.useState)(),2),R=A[0],T=A[1],L,N=f(Object(o.useState)([]),2),W=N[0],D=N[1],U,z=f(Object(o.useState)(!1),2),B=z[0],V=z[1],H,Q=f(Object(o.useState)(),2),G=Q[0],F=Q[1],Z,K=f(Object(o.useState)(),2),Y=K[0],q=K[1],X={close:function e(){F(void 0),q(void 0),V(!1)}},$={created:function e(t){O(t)}},J=function e(t,n){return m(void 0,void 0,void 0,s().mark((function e(){var r;return s().wrap((function e(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t(n);case 2:r=o.sent,I(r||[]);case 4:case"end":return o.stop()}}),e)})))};Object(o.useEffect)((function(){(null==p?void 0:p.id)&&J(p.request,y)}),[null==p?void 0:p.id]);var ee=function e(t,n){var r,o,i=t&&Array.isArray(t)?t[0]:t,a={longitude:(null==n?void 0:n.lng)||(null===(r=i.location)||void 0===r?void 0:r.longitude),latitude:(null==n?void 0:n.lat)||(null===(o=i.location)||void 0===o?void 0:o.latitude)};k(a),F(a),q(t),V(!0)},te=function e(){null==E||E.clearMap(),null==R||R.clearMarkers();var t=x.map((function(e){var t,n=null===(t=null==v?void 0:v.find((function(t){return e.state==t.type||"default"===t.type})))||void 0===t?void 0:t.img,r=new window.AMap.Marker({position:[e.location.longitude,e.location.latitude],content:n&&'<span><img style="width:20px;" src="'.concat(n,'" /></span>'),offset:new window.AMap.Pixel(-13,-36),extData:e});return r.on("click",(function(e){var t=e.target.getExtData();ee(t)})),r.setMap(E),r}));D(t)};Object(o.useEffect)((function(){E&&(null==x?void 0:x.length)&&te()}),[x,E]),Object(o.useEffect)((function(){E&&(null==W?void 0:W.length)&&E.plugin(["AMap.MarkerClusterer"],(function(){var e=new window.AMap.MarkerClusterer(E,W,{gridSize:80,maxZoom:14});T(e)}))}),[W]);var ne=function e(t,n){if(t&&(null==u?void 0:u.length))return i.a.createElement("div",{key:n},i.a.createElement("div",{className:l.a.infowindow_title,style:null==c?void 0:c.title},t.name),i.a.createElement("div",{className:l.a.infowindow_desc,style:null==c?void 0:c.desc},u.map((function(e){return i.a.createElement("p",null,e.label,"\uff1a",t[e.key])}))))},re=function e(){return i.a.createElement(a.InfoWindow,{position:G,closeWhenClickMap:!0,visible:B,offset:[2,-40],events:X,isCustom:!0,className:l.a.infowindow},i.a.createElement("div",{className:l.a.content,style:null==c?void 0:c.info},(null==Y?void 0:Y.length)?Y.map((function(e,t){return ne(e,t)})):ne(Y,0)))};return i.a.createElement("div",Object.assign({className:l.a.lowcodeMap},y),i.a.createElement(a.Map,{amapkey:n,mapStyle:r||"amap://styles/normal",center:_,events:$,zoom:h,zooms:[4,20]},re()))},_={},k="LowcodeMap",C=!0;function M(e,t){return e.default?e.default:e[t]?e[t]:e}},44:function(e,t,n){e.exports={lowcodeMap:"src--lowcodeMap--1l0UYss",infowindow:"src--infowindow--OOjCuej",content:"src--content--2Lb53fD",infowindow_title:"src--infowindow_title---p2t-Uj",infowindow_desc:"src--infowindow_desc--1rRatnF"}},69:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){return!!t&&"function"==typeof t};t.default=r},78:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o,i=s(n(1)),a,u=s(n(18)),l,c=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(e){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!=typeof window)if(e.__map__&&e.__poly__){var r=n;n.setterMap={active:function e(t){r.toggleActive(t)}},n.map=e.__map__,n.poly=e.__poly__,n.editorActive=!1,n.createEditorInstance().then((function(){n.props.onInstanceCreated&&n.props.onInstanceCreated()}))}else c.default.warning("MAP_INSTANCE_REQUIRED");return n}return d(t,e),r(t,[{key:"toggleActive",value:function e(t){t?this.editorActive||this.activeEditor():this.editorActive&&this.inactiveEditor()}},{key:"activeEditor",value:function e(){this.polyEditor&&(this.editorActive=!0,this.polyEditor.open())}},{key:"inactiveEditor",value:function e(){this.editorActive=!1,this.polyEditor&&this.polyEditor.close()}},{key:"createEditorInstance",value:function e(){var t=this;return this.polyEditor?Promise.resolve(this.polyEditor):new Promise((function(e){t.map.plugin(["AMap.PolyEditor"],(function(){t.polyEditor=new window.AMap.PolyEditor(t.map,t.poly),e(t.polyEditor)}))}))}},{key:"render",value:function e(){return null}},{key:"instance",get:function e(){return this.polyEditor}}]),t}(i.default.Component);t.default=(0,u.default)(h)}})}));